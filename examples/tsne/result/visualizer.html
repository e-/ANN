<!DOCTYPE html>
<body>
  <svg width="400" height="400" id="vis"></svg>
  
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-contour.v1.min.js"></script>

  <script>

draw('#vis', 'result.txt')

function translate(x, y) { return 'translate(' + x + ',' + y + ')'; }

function draw(svgId, path) {
  d3.text(path, text => {
    let data = d3.tsvParseRows(text, d => {
      r = d[0].split(' ')

      return [+r[0], +r[1]]
    })

    let width = 380, height = 380;
    let svg = d3.select(svgId).append('g').attr('transform', translate(10, 10))
    let bg = svg.append('g')

    let x = d3.scaleLinear().domain(d3.extent(data, d => d[0])).range([0, width])
    let y = d3.scaleLinear().domain(d3.extent(data, d => d[1])).range([0, height])

    let color = d3.scaleSequential(d3.interpolateCool).domain([0, 0.03]).clamp(true)
    let step = 10

    bg.selectAll('path')
      .data(d3.contourDensity()
        .x(d => x(d[0]))
        .y(d => y(d[1]))
        .size([width, height])
        .bandwidth(10)
        (data)
      )
      .enter()
        .append('path')
        .attr('d', d3.geoPath())
        .attr('fill', d => color(d.value))
  })
}

  </script>
</body>
